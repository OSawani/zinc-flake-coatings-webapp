{% extends 'base.html' %}
{% block title %}{{ subsection.title }}{% endblock %}
{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'section_list' %}">Section</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ subsection.title }}</li>
    </ol>
</nav>

<div class="content-section">
    <h2>{{ subsection.title }}</h2>
    <p>{{ subsection.content|safe }}</p>
</div>

<div class="mt-5">
    <h3>Comments</h3>
    {% if comments.exists %}
        <ul class="list-group mb-3">
            {% for comment in comments %}
            <li class="list-group-item">
                {{ comment.content }} - <em>{{ comment.user.username }}</em> on {{ comment.created_at }}
                {% if comment.user == request.user %}
                    <div class="btn-group float-end" role="group">
                        <a href="{% url 'edit_comment' comment.id %}" class="btn btn-secondary btn-sm">Edit</a>
                    </div>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No comments yet.</p>
    {% endif %}

    <h3>Do you have any constructive feedback?</h3>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            {{ form.content }}  <!-- Textarea field -->
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
{% endblock %}
